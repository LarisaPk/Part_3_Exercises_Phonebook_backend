{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/DisplayPerson.js","components/Persons.js","services/personsServices.js","components/Notification.js","App.js","index.js"],"names":["Filter","searchValue","handleSearchChange","value","onChange","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","check","onSubmit","type","DisplayPerson","name","number","handleDelete","onClick","Persons","personsToShow","map","person","key","id","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchValue","showAll","setShowAll","setMessage","notifClassName","setClassName","useEffect","personsService","initialPersons","console","log","length","filter","toLowerCase","includes","found","find","AddPerson","returnedPerson","concat","setTimeout","catch","error","e","target","preventDefault","undefined","personToUpdate","window","confirm","updatedPersonData","personToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.db7e81b8.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter =({searchValue, handleSearchChange}) =>{\r\n    return (\r\n        <div>\r\n            filter shown with <input value={searchValue} onChange={handleSearchChange}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm =({newName, handleNameChange, newNumber, handleNumberChange, check }) =>{\r\n    return (\r\n        <form onSubmit={check}>\r\n            <div>\r\n                  name: <input value={newName} onChange={handleNameChange}/>\r\n            </div>\r\n            <div>\r\n                  number: <input  value={newNumber} onChange={handleNumberChange}/>\r\n            </div>\r\n            <div>\r\n              <button type=\"submit\">add</button>\r\n            </div>\r\n         </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst DisplayPerson =({name, number, handleDelete}) =>{\r\n    return (\r\n        <div>\r\n            <div>{name} {number}  <button onClick={handleDelete}>delete</button></div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default DisplayPerson","import React from 'react'\r\nimport DisplayPerson from './DisplayPerson'\r\n\r\nconst Persons =({personsToShow, handleDelete}) =>{\r\n    return (\r\n            personsToShow.map(person=>\r\n            <DisplayPerson key ={person.id} name={person.name} number={person.number} handleDelete={()=>handleDelete(person.id)}/>\r\n          )\r\n    )\r\n}\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteNumber =(id)=>{\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response)\r\n}\r\nexport default { getAll, create, update, deleteNumber }","import React from 'react'\r\n\r\nconst Notification = ({ message, className }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className={className}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n  \r\nexport default Notification","import React, { useState, useEffect  } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport personsService from './services/personsServices'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ searchValue, setSearchValue ] = useState('')\r\n  const [showAll, setShowAll] = useState(true)\r\n  const [message, setMessage] = useState(null)\r\n  const [notifClassName, setClassName] = useState('')\r\n\r\n// fetching initial data\r\n  useEffect(() => {\r\n    personsService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n  console.log('render', persons.length, 'persons')\r\n\r\n  // filters what to show all persons or those that match search query, case insensitive\r\n  const personsToShow = showAll\r\n  ? persons\r\n  : persons.filter(person =>\r\n    person.name\r\n    .toLowerCase()\r\n    .includes(searchValue.toLowerCase()))\r\n\r\n  // finds person by name (does not matter of it starts from capital letter or not)\r\n  const found = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())  \r\n\r\n  // checks if peson already exists, if not- calls AddPerson() when submit button clicked, if yes- asks if user wants to update info\r\n  const check=(e)=>{\r\n  e.preventDefault()\r\n  console.log(found)\r\n    if (found === undefined){ \r\n      AddPerson(newName, newNumber)\r\n    }\r\n    else {\r\n      const personToUpdate = {\r\n        name: found.name,\r\n        number: newNumber,\r\n      }\r\n      if ((window.confirm(`${found.name} is already added to phonebook, replace the old number with a new one?`))&&(newNumber.length>7)) { \r\n          personsService\r\n        .update(found.id, personToUpdate)\r\n        .then( updatedPersonData => {\r\n          setPersons(persons.map(person => person.id!==found.id ? person :updatedPersonData ))\r\n          setNewName('')\r\n          setNewNumber('') \r\n          setClassName('success')\r\n          setMessage(`number of ${personToUpdate.name} has been changed to ${personToUpdate.number}`)\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n          setMessage(\r\n            `Note '${personToUpdate.name}' has already been removed from server`\r\n          )\r\n          setClassName('error')\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n          setPersons(persons.filter(person => person.id !== found.id))\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // adds new persons to state \r\n  const AddPerson=(newName, newNumber)=>{\r\n    const newPerson = {\r\n        name: newName,\r\n        number:newNumber,\r\n      }\r\n      personsService\r\n      .create(newPerson)\r\n      .then(returnedPerson => {\r\n        console.log(returnedPerson)\r\n        setPersons(persons.concat(returnedPerson))\r\n        setNewName('')\r\n        setNewNumber('') \r\n        setClassName('success')\r\n        setMessage(`Added ${returnedPerson.name}`)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n      })\r\n      .catch(error => {\r\n        //access the error message\r\n        console.log(error.response.data)\r\n        setMessage(\r\n          `${error.response.data.error}`\r\n        )\r\n        setClassName('error')\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n      })    \r\n  }  \r\n\r\n  // sets Newname to state when value changes in the form input according to that value. then it displayed in the input field\r\n  const handleNameChange =(e)=>{\r\n  console.log(e.target.value)\r\n    setNewName(e.target.value)\r\n  }\r\n\r\n  //sets new number to state\r\n  const handleNumberChange =(e)=>{\r\n    console.log(e.target.value)\r\n    setNewNumber(e.target.value)\r\n  }\r\n\r\n  //sets search value to state and state of Showall dependidng on if there is value in the field \r\n  const handleSearchChange =(e)=>{\r\n    console.log(e.target.value)\r\n    setSearchValue(e.target.value)\r\n  // if there is a value in the search field\r\n    if (e.target.value){\r\n      setShowAll(false)}\r\n    else{\r\n      setShowAll(true)}\r\n  }\r\n\r\n  // deleting entries from the phonebook\r\n  const handleDelete =id => {\r\n    const personToDelete = persons.find(person => person.id === id)\r\n    if (window.confirm(`Delete ${personToDelete.name}?`)) { \r\n      personsService\r\n      .deleteNumber(id)\r\n      .then( response =>{\r\n        console.log(response)\r\n        setPersons(persons.filter(person => person.id!==id))\r\n        setClassName('success')\r\n        setMessage(`Deleted ${personToDelete.name}`)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n      })   \r\n    }\r\n  }\r\n\r\n  return (\r\n    <div> \r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} className={notifClassName}/>\r\n      <Filter searchValue ={searchValue} handleSearchChange={handleSearchChange}/>\r\n      <h3>Add a new</h3>\r\n      <PersonForm newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} check={check} />\r\n      <h3>Numbers</h3>\r\n      <Persons personsToShow={personsToShow} handleDelete={handleDelete}/>  \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}